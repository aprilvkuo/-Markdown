# C++ 函数

## 函数声明

函数**声明**会告诉编译器函数名称及如何调用函数。函数的实际主体可以单独定义。

函数声明包括以下几个部分：

```
return_type function_name( parameter list );
```

针对上面定义的函数 max()，以下是函数声明：

```
int max(int num1, int num2);
```

在函数声明中，参数的名称并不重要，只有参数的类型是必需的，因此下面也是有效的声明：

```
int max(int, int);
```

当您在一个源文件中定义函数且在另一个文件中调用函数时，函数声明是必需的。在这种情况下，您应该在调用函数的文件顶部声明函数。



## 函数参数

如果函数要使用参数，则必须声明接受参数值的变量。这些变量称为函数的**形式参数**。

形式参数就像函数内的其他局部变量，在进入函数时被创建，退出函数时被销毁。

当调用函数时，有两种向函数传递参数的方式：

| 调用类型                                     | 描述                                       |
| ---------------------------------------- | ---------------------------------------- |
| [传值调用](http://www.runoob.com/cplusplus/cpp-function-call-by-value.html) | 该方法把参数的实际值复制给函数的形式参数。在这种情况下，修改函数内的形式参数对实际参数没有影响。 |
| [指针调用](http://www.runoob.com/cplusplus/cpp-function-call-by-pointer.html) | 该方法把参数的地址复制给形式参数。在函数内，该地址用于访问调用中要用到的实际参数。这意味着，修改形式参数会影响实际参数。 |
| [引用调用](http://www.runoob.com/cplusplus/cpp-function-call-by-reference.html) | 该方法把参数的引用复制给形式参数。在函数内，该引用用于访问调用中要用到的实际参数。这意味着，修改形式参数会影响实际参数。 |

默认情况下，C++ 使用**传值调用**来传递参数。一般来说，这意味着函数内的代码不能改变用于调用函数的参数。之前提到的实例，调用 max() 函数时，使用了相同的方法。



## 匿名函数

C++11 的 lambda 表达式规范如下：

| `**[**` capture `**]**` `**(**` params `**)**` mutable exception attribute `**->**` ret `**{**` body `**}**` | (1)  |      |
| ---------------------------------------- | ---- | ---- |
| `**[**` capture `**]**` `**(**` params `**)**` `**->**` ret `**{**` body `**}**` | (2)  |      |
| `**[**` capture `**]**` `**(**` params `**)**` `**{**` body `**}**` | (3)  |      |
| `**[**` capture `**]**` `**{**` body `**}**` | (4)  |      |

其中

- (1) 是完整的 lambda 表达式形式，
- (2) const 类型的 lambda 表达式，该类型的表达式不能改捕获("capture")列表中的值。
- (3)省略了返回值类型的 lambda 表达式，但是该 lambda 表达式的返回类型可以按照下列规则推演出来：
  - 如果 lambda 代码块中包含了 return 语句，则该 lambda 表达式的返回类型由 return 语句的返回类型确定。
  - 如果没有 return 语句，则类似 void f(...) 函数。
- 省略了参数列表，类似于无参函数 f()。

**mutable** 修饰符说明 lambda 表达式体内的代码可以修改被捕获的变量，并且可以访问被捕获对象的 non-const 方法。

**exception** 说明 lambda 表达式是否抛出异常(`**noexcept**`)，以及抛出何种异常，类似于void f() throw(X, Y)。

**attribute** 用来声明属性。

另外，**capture** 指定了在可见域范围内 lambda 表达式的代码内可见得外部变量的列表，具体解释如下：

- `**[a,&b]**` a变量以值的方式呗捕获，b以引用的方式被捕获。
- `**[this]**` 以值的方式捕获 this 指针。
- `**[&]**` 以引用的方式捕获所有的外部自动变量。
- `**[=]**` 以值的方式捕获所有的外部自动变量。
- `**[]**` 不捕获外部的任何变量。

此外，**params **指定 lambda 表达式的参数。